<!-- Main container -->
<div
  class="relative h-[100dvh] bottom-0 w-full flex bg-[#121212] text-white overflow-hidden"
>
  <!-- Sidebar for Desktop -->
  <div
    class="bg-[#1a1a1a] text-white flex-col transition-all duration-300 ease-in-out flex-shrink-0 hidden md:flex"
    [class.w-64]="!sidebarClosed"
    [class.w-15]="sidebarClosed"
  >
    <button (click)="toggleSidebar()" class="self-end m-5">
      <mat-icon>menu</mat-icon>
    </button>
  </div>

  <!-- Sidebar for Mobile (Overlay) -->
  <div
    class="fixed inset-0 z-60 md:hidden transition-transform duration-300 ease-in-out"
    [class.translate-x-0]="!sidebarClosed"
    [class.-translate-x-full]="sidebarClosed"
  >
    <div
      class="absolute inset-0 bg-black opacity-50"
      (click)="toggleSidebar()"
    ></div>
    <div class="relative w-64 bg-[#1a1a1a] h-full flex flex-col text-white">
      <div class="flex flex-col p-6">
        <button
          (click)="toggleSidebar()"
          class="text-white hover:text-[#ec6089] self-end"
        >
          <svg
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>
        <div class="self-center">
          <img src="/large-1.png" alt="Logo" class="h-30 w-auto" />
        </div>
        <button
          class="bg-gradient-to-r from-[#543ffc] to-[#ec6089] text-white self-center active:bg-black w-full p-3 mt-5 rounded-xl text-xl transition duration-150 ease-in-out cursor-pointer select-none"
        >
          Home
        </button>
        <button
          class="bg-gradient-to-r from-[#543ffc] to-[#ec6089] text-white self-center active:bg-black w-full p-3 mt-3 rounded-xl text-xl transition duration-150 ease-in-out cursor-pointer select-none"
        >
          Info
        </button>
      </div>
      <div class="flex-grow overflow-y-auto p-4">
        <!-- Mobile sidebar content -->
      </div>
    </div>
  </div>

  <!-- Chat Area -->
  <div class="flex-grow flex flex-col overflow-hidden bg-[#000000] text-white">
    <header
      class="fixed top-0 z-50 p-4 shadow-lg bg-[#000000] flex items-center justify-center transition-all duration-300"
      [ngStyle]="headerStyles"
    >
      <button (click)="toggleSidebar()" class="md:hidden absolute left-6 top-6">
        <mat-icon>menu</mat-icon>
      </button>
      <h1
        class="text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#543ffc] to-[#ec6089]"
      >
        SageMedic AI
      </h1>
    </header>

    <!-- Messages Container -->
    <div
      #messagesContainer
      class="flex-grow self-center w-full overflow-y-auto p-6 pt-24 pb-20 md:mb-22 lg:mb-26 flex flex-col md:w-[80%] lg:w-[53%] custom-scrollbar"
    >
      <div
        *ngFor="let message of messages"
        class="flex mb-4 max-w-3/4"
        [ngClass]="{
          'self-end': message.sender === 'user',
          'self-start': message.sender === 'bot'
        }"
      >
        <div
          class="py-3 px-4 rounded-2xl leading-normal"
          [ngClass]="{
            'bg-[#543ffc] text-white': message.sender === 'user',
            'bg-gray-700 text-white': message.sender === 'bot'
          }"
        >
          <p>{{ message.text }}</p>
        </div>
      </div>
    </div>

    <!-- Input Section -->
    <div
      class="w-full md:w-[70%] lg:w-[50%] px-4 py-4 border-t border-[#543ffc] bg-[#1a1a1a] fixed self-center bottom-0 md:bottom-5 lg:bottom-10 md:border-none lg:border-none md:rounded-2xl z-50"
    >
      <div class="flex items-end bg-[#2a2a2a] rounded-2xl py-2 px-4">
        <textarea
          #autoTextarea
          placeholder="Message SageMedic-AI..."
          [(ngModel)]="userInput"
          (input)="autoResize()"
          (keydown.enter)="handleKeyDown($event)"
          rows="1"
          class="w-full resize-none bg-transparent border-none text-white text-base outline-none placeholder-gray-400 overflow-hidden max-h-40"
        ></textarea>

        <button
          (click)="sendMessage()"
          class="text-[#543ffc] hover:text-[#ec6089] transition flex items-center justify-center ml-2"
        >
          <mat-icon>send</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
