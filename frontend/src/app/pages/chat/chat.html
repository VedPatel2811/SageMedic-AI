<!-- Main container -->
<div
  class="relative h-[100dvh] bottom-0 w-full flex bg-[#121212] text-white overflow-hidden"
>
  <app-sidebar
  [sidebarClosed]="sidebarClosed"
  (sidebarToggle)="onSidebarToggled($event)"
></app-sidebar>

  <!-- Chat Area -->
  <div class="flex-grow flex flex-col overflow-hidden bg-[#000000] text-white">
    <header
      class="fixed top-0 z-50 p-4 shadow-lg bg-[#000000] flex items-center justify-center transition-all duration-300"
      [ngStyle]="headerStyles"
    >
      <button (click)="toggleSidebar()" class="md:hidden absolute left-6 top-6">
        <mat-icon>menu</mat-icon>
      </button>
      <h1
        class="text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#543ffc] to-[#ec6089]"
      >
        SageMedic AI
      </h1>
    </header>

    <!-- Messages Container -->
    <div
      #messagesContainer
      class="flex-grow self-center w-full overflow-y-auto p-6 pt-24 pb-20 md:mb-22 lg:mb-26 flex flex-col md:w-[80%] lg:w-[53%] custom-scrollbar"
    >
      <div
        *ngFor="let message of messages"
        class="flex mb-4 max-w-3/4"
        [ngClass]="{
          'self-end': message.sender === 'user',
          'self-start': message.sender === 'bot'
        }"
      >
        <div
          class="py-3 px-4 rounded-2xl leading-normal"
          [ngClass]="{
            'bg-[#543ffc] text-white': message.sender === 'user',
            'bg-gray-700 text-white': message.sender === 'bot'
          }"
        >
          <p>{{ message.text }}</p>
        </div>
      </div>
    </div>

    <!-- Input Section -->
    <div
      class="w-full md:w-[70%] lg:w-[50%] px-4 py-4 border-t border-[#543ffc] bg-[#1a1a1a] fixed self-center bottom-0 md:bottom-5 lg:bottom-10 md:border-none lg:border-none md:rounded-2xl z-50"
    >
      <div class="flex items-end bg-[#2a2a2a] rounded-2xl py-2 px-4">
        <textarea
          #autoTextarea
          placeholder="Message SageMedic-AI..."
          [(ngModel)]="userInput"
          (input)="autoResize()"
          (keydown.enter)="handleKeyDown($event)"
          rows="1"
          class="w-full resize-none bg-transparent border-none text-white text-base outline-none placeholder-gray-400 overflow-hidden max-h-40"
        ></textarea>

        <button
          (click)="sendMessage()"
          class="text-[#543ffc] hover:text-[#ec6089] transition flex items-center justify-center ml-2"
        >
          <mat-icon>send</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
