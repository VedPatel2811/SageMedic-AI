<header
  class="flex items-center justify-between p-4 sm:px-[15%] lg:px-[20%] bg-black text-white shadow-lg"
>
  <div>
    <h1
      class="text-xl font-bold cursor-pointer text-transparent bg-clip-text bg-gradient-to-r from-[#543ffc] to-[#ec6089]"
      (click)="goToHome()"
    >
      SageMedic AI
    </h1>
  </div>

  <ng-container *ngIf="auth.isAuthenticated$ | async; else loggedOut">
    <!-- Profile Image Trigger -->
    <div class="relative">
      <button
        #avatarButton
        class="hover:opacity-90"
        (click)="onAvatarClick($event)"
        aria-label="User menu"
      >
        <img
          [src]="user?.picture"
          alt="Profile"
          class="h-10 w-10 rounded-full border-2 border-gray-200"
        />
      </button>

      <!-- Dropdown -->
      <div
        #profileMenu
        *ngIf="profileMenuOpen"
        class="absolute right-0 mt-2 w-35 bg-[#212529] text-white rounded-lg shadow-lg overflow-hidden z-20"
      >
        <button
          class="flex w-full justify-center items-center px-4 py-2 hover:bg-[#343a40] gap-x-2"
          (click)="logout()"
        >
          <mat-icon>logout</mat-icon>
          <span>Log Out</span>
        </button>
      </div>
    </div>
  </ng-container>

  <ng-template #loggedOut>
    <button
      class="bg-gradient-to-r from-[#543ffc] to-[#ec6089] text-white font-bold py-2 px-4 rounded-full"
      (click)="loginWithRedirect()"
    >
      Sign In
    </button>
  </ng-template>
</header>
